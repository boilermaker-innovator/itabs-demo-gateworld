<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Gateworld Perth ‚Äî Instant Gate Estimator</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
  html, body { 
    min-height: 100vh; 
    font-family: 'DM Sans', sans-serif; 
    background: linear-gradient(180deg, #f5f0eb 0%, #e8e2da 100%);
    color: #1a1a2e;
    -webkit-font-smoothing: antialiased;
  }
  
  .container {
    max-width: 480px;
    margin: 0 auto;
    padding: 24px 16px 40px;
  }
  
  /* Header */
  .header { text-align: center; margin-bottom: 28px; }
  .header-brand { font-size: 12px; letter-spacing: 3px; text-transform: uppercase; color: #9ca3af; margin-bottom: 6px; }
  .header-title { font-size: 20px; font-weight: 700; font-family: 'Playfair Display', serif; color: #1a1a2e; }
  .header-line { width: 40px; height: 3px; background: #e8a838; border-radius: 2px; margin: 12px auto 0; }
  .header-rating { margin-top: 12px; font-size: 13px; color: #9ca3af; }
  .header-rating span { color: #e8a838; }
  
  /* Card */
  .card {
    background: #fff;
    border-radius: 20px;
    padding: 28px 24px;
    box-shadow: 0 8px 40px rgba(0,0,0,0.08), 0 1px 3px rgba(0,0,0,0.04);
    transition: opacity 0.25s ease, transform 0.25s ease;
  }
  .card.animating { opacity: 0; transform: translateX(-12px); }
  
  /* Steps */
  .steps { display: flex; align-items: center; gap: 5px; margin-bottom: 24px; }
  .step-dot {
    height: 6px; border-radius: 3px; background: #e0dbd4;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); flex: 1;
  }
  .step-dot.active { background: #e8a838; flex: 2; }
  .step-dot.done { background: #e8a838; }
  .step-label {
    margin-left: 6px; font-size: 11px; color: #9ca3af;
    letter-spacing: 1px; text-transform: uppercase; white-space: nowrap;
  }
  
  /* Section */
  .section-title {
    font-size: 22px; font-weight: 700; font-family: 'Playfair Display', serif;
    color: #1a1a2e; margin-bottom: 4px; line-height: 1.2;
  }
  .section-subtitle { font-size: 13px; color: #9ca3af; margin-bottom: 22px; line-height: 1.5; }
  
  /* Option Cards */
  .option {
    padding: 16px; border-radius: 14px; border: 2px solid #e8e2da;
    background: #fff; cursor: pointer; transition: all 0.2s ease;
    margin-bottom: 8px; position: relative; -webkit-user-select: none; user-select: none;
  }
  .option:active { transform: scale(0.98); }
  .option.selected {
    border-color: #e8a838;
    background: linear-gradient(135deg, #fdf6ec, #fef9f1);
    box-shadow: 0 4px 16px rgba(232,168,56,0.1);
  }
  .option-check {
    position: absolute; top: 10px; right: 10px; width: 20px; height: 20px;
    border-radius: 10px; background: #e8a838; display: none;
    align-items: center; justify-content: center; font-size: 11px; color: #fff; font-weight: 700;
  }
  .option.selected .option-check { display: flex; }
  
  .option-row { display: flex; align-items: center; gap: 14px; }
  .option-icon {
    width: 50px; height: 50px; border-radius: 12px;
    display: flex; align-items: center; justify-content: center; font-size: 22px; flex-shrink: 0;
  }
  .option-name { font-size: 15px; font-weight: 600; color: #1a1a2e; }
  .option-desc { font-size: 11px; color: #9ca3af; margin-top: 1px; }
  .option-price { font-size: 12px; color: #e8a838; font-weight: 600; margin-top: 2px; }
  
  /* Style Grid */
  .style-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
  .style-option {
    padding: 14px; border-radius: 14px; border: 2px solid #e8e2da;
    background: #fff; cursor: pointer; transition: all 0.2s ease;
    position: relative; -webkit-user-select: none; user-select: none;
  }
  .style-option:active { transform: scale(0.97); }
  .style-option.selected { border-color: #e8a838; background: linear-gradient(135deg, #fdf6ec, #fef9f1); }
  .style-option .option-check { top: 8px; right: 8px; width: 18px; height: 18px; font-size: 10px; }
  .style-option.selected .option-check { display: flex; }
  .style-preview { width: 100%; height: 60px; border-radius: 8px; margin-bottom: 8px; }
  .style-name { font-size: 13px; font-weight: 600; color: #1a1a2e; }
  .style-extra { font-size: 11px; color: #9ca3af; margin-top: 1px; }
  .style-badge {
    position: absolute; top: 56px; right: 10px; background: #e8a838; color: #1a1a2e;
    font-size: 8px; font-weight: 700; padding: 2px 6px; border-radius: 3px;
    text-transform: uppercase; letter-spacing: 0.5px;
  }
  
  /* Colour Grid */
  .colour-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
  .colour-option {
    padding: 12px; border-radius: 12px; border: 2px solid #e8e2da;
    background: #fff; cursor: pointer; transition: all 0.2s ease;
    text-align: center; position: relative; -webkit-user-select: none; user-select: none;
  }
  .colour-option:active { transform: scale(0.96); }
  .colour-option.selected { border-color: #e8a838; background: linear-gradient(135deg, #fdf6ec, #fef9f1); }
  .colour-option .option-check { top: 6px; right: 6px; width: 18px; height: 18px; font-size: 10px; }
  .colour-option.selected .option-check { display: flex; }
  .colour-swatch {
    width: 100%; height: 48px; border-radius: 8px; margin-bottom: 8px;
    border: 1px solid rgba(0,0,0,0.08);
  }
  .colour-name { font-size: 11px; font-weight: 600; color: #1a1a2e; }
  .colour-code { font-size: 9px; color: #9ca3af; margin-top: 1px; }
  
  /* Height visual */
  .height-visual {
    display: flex; align-items: flex-end; gap: 4px; height: 44px;
    margin-right: 16px;
  }
  .height-bar {
    width: 4px; background: #e0dbd4; border-radius: 2px; transition: all 0.3s ease;
  }
  .option.selected .height-bar { background: #e8a838; }
  
  /* Width bar */
  .width-bar { height: 6px; border-radius: 3px; background: #e8e2da; transition: all 0.3s ease; }
  .option.selected .width-bar { background: linear-gradient(90deg, #e8a838, #f0b84d); }
  .width-row, .height-row { display: flex; align-items: center; justify-content: space-between; gap: 14px; }
  .width-label, .height-label { font-size: 15px; font-weight: 600; color: #1a1a2e; white-space: nowrap; }
  .height-desc { font-size: 11px; color: #9ca3af; }
  
  /* Job type grid */
  .job-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
  .job-option {
    padding: 20px 14px; border-radius: 14px; border: 2px solid #e8e2da;
    background: #fff; cursor: pointer; transition: all 0.2s ease;
    text-align: center; position: relative; -webkit-user-select: none; user-select: none;
  }
  .job-option:active { transform: scale(0.97); }
  .job-option.selected { border-color: #e8a838; background: linear-gradient(135deg, #fdf6ec, #fef9f1); }
  .job-option .option-check { top: 8px; right: 8px; width: 18px; height: 18px; font-size: 10px; }
  .job-option.selected .option-check { display: flex; }
  .job-icon { font-size: 28px; margin-bottom: 8px; }
  .job-name { font-size: 14px; font-weight: 600; color: #1a1a2e; }
  .job-desc { font-size: 11px; color: #9ca3af; margin-top: 3px; line-height: 1.4; }
  
  /* Timeframe */
  .time-icon { font-size: 20px; margin-right: 4px; }
  
  /* Extras */
  .extra-row { display: flex; align-items: center; justify-content: space-between; }
  .extra-left { display: flex; align-items: center; gap: 12px; }
  .extra-icon { font-size: 20px; }
  .extra-name { font-size: 14px; font-weight: 600; color: #1a1a2e; }
  .extra-price { font-size: 13px; font-weight: 600; color: #9ca3af; transition: color 0.2s; }
  .option.selected .extra-price { color: #e8a838; }
  
  /* Result */
  .result-card {
    background: linear-gradient(135deg, #1a1a2e 0%, #2d3142 100%);
    border-radius: 18px; padding: 28px 24px; margin-bottom: 16px;
    text-align: center; animation: slideUp 0.5s ease both;
  }
  .result-label { font-size: 11px; color: rgba(255,255,255,0.4); letter-spacing: 2px; text-transform: uppercase; margin-bottom: 6px; }
  .result-price { font-size: 36px; font-weight: 700; font-family: 'Playfair Display', serif; color: #e8a838; line-height: 1.1; }
  .result-note { font-size: 11px; color: rgba(255,255,255,0.35); margin-top: 6px; }
  
  .summary-card {
    background: #fff; border-radius: 14px; padding: 18px; border: 1px solid #e8e2da;
    margin-bottom: 16px; animation: slideUp 0.5s ease 0.1s both;
  }
  .summary-title { font-size: 10px; color: #9ca3af; letter-spacing: 1.5px; text-transform: uppercase; margin-bottom: 12px; }
  .summary-row {
    display: flex; justify-content: space-between; padding: 7px 0;
    border-bottom: 1px solid #f5f0eb; font-size: 13px;
  }
  .summary-row:last-child { border-bottom: none; }
  .summary-key { color: #9ca3af; }
  .summary-val { color: #1a1a2e; font-weight: 600; text-align: right; max-width: 55%; }
  
  .cta-card {
    background: linear-gradient(135deg, #fdf6ec, #fef9f1);
    border-radius: 14px; padding: 22px; border: 2px solid #e8a838;
    text-align: center; margin-bottom: 14px; animation: slideUp 0.5s ease 0.2s both;
  }
  .cta-title { font-size: 16px; font-weight: 700; color: #1a1a2e; margin-bottom: 4px; }
  .cta-subtitle { font-size: 12px; color: #9ca3af; margin-bottom: 16px; line-height: 1.5; }
  .cta-buttons { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
  
  /* Buttons */
  .btn {
    padding: 13px 24px; border-radius: 10px; font-size: 14px; font-weight: 600;
    font-family: 'DM Sans', sans-serif; cursor: pointer; transition: all 0.2s ease;
    border: none; -webkit-user-select: none; user-select: none; text-decoration: none;
    display: inline-flex; align-items: center; justify-content: center; gap: 6px;
  }
  .btn:active { transform: scale(0.97); }
  .btn-primary { background: #e8a838; color: #1a1a2e; box-shadow: 0 4px 16px rgba(232,168,56,0.25); }
  .btn-primary:disabled { background: #d1ccc5; color: #9ca3af; box-shadow: none; cursor: not-allowed; transform: none; }
  .btn-secondary { background: transparent; color: #1a1a2e; border: 2px solid #d1ccc5; }
  .btn-call { background: #e8a838; color: #1a1a2e; padding: 13px 20px; font-size: 15px; font-weight: 700; box-shadow: 0 4px 16px rgba(232,168,56,0.25); }
  .btn-quote { background: transparent; color: #1a1a2e; border: 2px solid #d1ccc5; padding: 13px 20px; }
  
  .nav-row { display: flex; justify-content: flex-end; margin-top: 22px; gap: 10px; }
  .nav-row.has-back { justify-content: space-between; }
  
  .start-over { text-align: center; font-size: 12px; color: #9ca3af; cursor: pointer; text-decoration: underline; padding: 8px; }
  
  .footer { text-align: center; margin-top: 20px; font-size: 11px; color: #c4beb6; line-height: 1.5; }
  .powered-by { text-align: center; margin-top: 10px; padding-top: 10px; border-top: 1px solid #e8e2da; font-size: 10px; color: #c4beb6; }
  .powered-by a { color: #9ca3af; text-decoration: none; font-weight: 600; }
  
  /* Contact form */
  .form-row { margin-bottom: 14px; }
  .form-label { display: block; font-size: 12px; font-weight: 600; color: #1a1a2e; margin-bottom: 4px; }
  .form-input {
    width: 100%; padding: 12px 14px; border-radius: 10px; border: 2px solid #e8e2da;
    background: #fff; font-size: 14px; font-family: 'DM Sans', sans-serif; color: #1a1a2e;
    outline: none; transition: border-color 0.2s;
  }
  .form-input:focus { border-color: #e8a838; }
  .form-input::placeholder { color: #c4beb6; }
  .form-row-half { display: flex; gap: 10px; }
  .form-row-half > div { flex: 1; }
  .form-note { font-size: 11px; color: #9ca3af; margin-top: 6px; text-align: center; }
  
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <div class="header-brand">Gateworld Perth</div>
    <div class="header-title">Instant Gate Estimator</div>
    <div class="header-line"></div>
    <div class="header-rating"><span>‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span> 5.0 from 48 Google Reviews</div>
  </div>
  
  <div class="card" id="mainCard">
    <div class="steps" id="stepsIndicator"></div>
    <div id="content"></div>
    <div id="nav"></div>
  </div>
  
  <div class="footer">Automatic sliding gates & swinging gates specialists<br>Serving all of Perth Metro</div>
  <div class="powered-by">Powered by <a href="https://itabs.ai" target="_blank">iTabs</a></div>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ
const GATE_TYPES = [
  { id: 'sliding', name: 'Sliding Gate', icon: '‚ü∂', desc: 'Automatic sliding driveway gates', basePrice: 3800, bg: 'linear-gradient(135deg, #2d3436 0%, #636e72 100%)' },
  { id: 'swing_single', name: 'Single Swing Gate', icon: '‚ü≥', desc: 'One panel, swings open', basePrice: 3200, bg: 'linear-gradient(135deg, #2d3436 0%, #4a6741 100%)' },
  { id: 'swing_double', name: 'Double Swing Gate', icon: '‚ü≥‚ü≥', desc: 'Two panels, both swing open', basePrice: 4200, bg: 'linear-gradient(135deg, #2d3436 0%, #3a5a4a 100%)' },
  { id: 'pedestrian', name: 'Pedestrian Gate', icon: 'üö∂', desc: 'Walk-through access gate', basePrice: 1200, bg: 'linear-gradient(135deg, #2d3436 0%, #5a4a3a 100%)' },
];

const STYLES = [
  { id: 'slat', name: 'Aluminium Slat', priceAdd: 0, popular: true, bg: 'repeating-linear-gradient(0deg, #3d3d3d 0px, #3d3d3d 8px, #5a5a5a 8px, #5a5a5a 12px)' },
  { id: 'picket', name: 'Picket', priceAdd: 200, popular: false, bg: 'repeating-linear-gradient(90deg, #4a4a4a 0px, #4a4a4a 6px, transparent 6px, transparent 14px)' },
  { id: 'batten', name: 'Batten', priceAdd: 300, popular: false, bg: 'repeating-linear-gradient(90deg, #555 0px, #555 12px, #3a3a3a 12px, #3a3a3a 14px)' },
  { id: 'blade', name: 'Vertical Blade', priceAdd: 400, popular: false, bg: 'repeating-linear-gradient(90deg, #4a4a4a 0px, #4a4a4a 3px, transparent 3px, transparent 18px)' },
];

const COLOURS = [
  { id: 'monument', name: 'Monument', hex: '#3b3b3b', code: 'Colorbond' },
  { id: 'surfmist', name: 'Surfmist', hex: '#e8e4dc', code: 'Colorbond' },
  { id: 'woodland', name: 'Woodland Grey', hex: '#5c5c50', code: 'Colorbond' },
  { id: 'satin_black', name: 'Satin Black', hex: '#1a1a1a', code: 'Powder Coat' },
  { id: 'primrose', name: 'Primrose', hex: '#f0e8c8', code: 'Colorbond' },
  { id: 'basalt', name: 'Basalt', hex: '#6b6b60', code: 'Colorbond' },
  { id: 'pale_eucalypt', name: 'Pale Eucalypt', hex: '#6b7c5e', code: 'Colorbond' },
  { id: 'ironstone', name: 'Ironstone', hex: '#44403c', code: 'Colorbond' },
  { id: 'custom', name: 'Custom RAL', hex: 'linear-gradient(135deg, #e8a838, #e86838, #6838e8, #38a8e8)', code: '+$200', isGradient: true },
];

const HEIGHTS = [
  { id: '1200', label: '1200mm', desc: 'Standard low fence', multiplier: 0.9, barH: [16, 20, 24] },
  { id: '1500', label: '1500mm', desc: 'Most popular for front yards', multiplier: 1.0, barH: [20, 26, 32], popular: true },
  { id: '1800', label: '1800mm', desc: 'Full privacy height', multiplier: 1.15, barH: [26, 34, 42] },
  { id: '2100', label: '2100mm', desc: 'Maximum height', multiplier: 1.35, barH: [30, 38, 44] },
];

const WIDTHS = [
  { id: '3m', label: 'Up to 3m', multiplier: 1.0, barWidth: '30%' },
  { id: '4m', label: '3m ‚Äì 4m', multiplier: 1.15, barWidth: '50%' },
  { id: '5m', label: '4m ‚Äì 5m', multiplier: 1.3, barWidth: '70%' },
  { id: '6m', label: '5m ‚Äì 6m+', multiplier: 1.5, barWidth: '90%' },
];

const JOB_TYPES = [
  { id: 'new', name: 'Brand New Install', icon: 'üèóÔ∏è', desc: 'No existing gate or tracks' },
  { id: 'replace_gate', name: 'Replace Gate', icon: 'üîÑ', desc: 'New gate on existing tracks/posts' },
  { id: 'replace_motor', name: 'Replace Motor Only', icon: '‚ö°', desc: 'Keep gate, new motor', priceOverride: 1200 },
  { id: 'add_motor', name: 'Automate Existing Gate', icon: 'ü§ñ', desc: 'Add motor to manual gate', priceOverride: 1400 },
];

const PROPERTY_TYPES = [
  { id: 'residential', name: 'Residential', icon: 'üè†', desc: 'House or townhouse' },
  { id: 'commercial', name: 'Commercial', icon: 'üè¢', desc: 'Business, warehouse, industrial' },
  { id: 'strata', name: 'Strata / Body Corp', icon: 'üèòÔ∏è', desc: 'Shared property or complex' },
];

const TIMEFRAMES = [
  { id: 'asap', name: 'ASAP', icon: 'üî•', desc: 'Within 2 weeks' },
  { id: 'month', name: 'This Month', icon: 'üìÖ', desc: 'Within 4 weeks' },
  { id: 'planning', name: 'Just Planning', icon: 'üí≠', desc: 'Next few months' },
  { id: 'quoting', name: 'Getting Quotes', icon: 'üìù', desc: 'Comparing options' },
];

const EXTRAS = [
  { id: 'motor', name: 'Gate Motor', price: 800, icon: '‚ö°' },
  { id: 'intercom', name: 'Intercom System', price: 600, icon: 'üìû' },
  { id: 'keypad', name: 'Keypad Access', price: 350, icon: 'üî¢' },
  { id: 'remote', name: 'Extra Remotes (√ó2)', price: 120, icon: 'üì°' },
  { id: 'safety_beam', name: 'Safety Beam Sensors', price: 250, icon: 'üî¥' },
  { id: 'ped_gate', name: 'Matching Pedestrian Gate', price: 1200, icon: 'üö∂' },
];

const SLOPE_OPTIONS = [
  { id: 'flat', name: 'Flat Driveway', icon: '‚ûñ', desc: 'Level ground', priceAdd: 0 },
  { id: 'slight', name: 'Slight Slope', icon: '‚üã', desc: 'Gentle incline', priceAdd: 300 },
  { id: 'steep', name: 'Steep Slope', icon: '‚üã‚üã', desc: 'Noticeable hill', priceAdd: 600 },
  { id: 'unsure', name: 'Not Sure', icon: '‚ùì', desc: "We'll check on site", priceAdd: 0 },
];

// Total steps: 0=gate, 1=style, 2=colour, 3=height, 4=width, 5=slope, 6=job type, 7=property, 8=timeframe, 9=extras, 10=contact, 11=result
const TOTAL_SELECTION_STEPS = 10;

// ‚îÄ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ
let state = {
  step: 0,
  gateType: null,
  style: null,
  colour: null,
  height: null,
  width: null,
  slope: null,
  jobType: null,
  propertyType: null,
  timeframe: null,
  extras: [],
  contact: { name: '', phone: '', email: '', suburb: '' },
};

// ‚îÄ‚îÄ‚îÄ RENDER ENGINE ‚îÄ‚îÄ‚îÄ
function render() {
  const content = document.getElementById('content');
  const nav = document.getElementById('nav');
  const steps = document.getElementById('stepsIndicator');
  
  // Steps indicator
  if (state.step <= TOTAL_SELECTION_STEPS) {
    let html = '';
    for (let i = 0; i < TOTAL_SELECTION_STEPS; i++) {
      let cls = 'step-dot';
      if (i < state.step) cls += ' done';
      if (i === state.step) cls += ' active';
      html += `<div class="${cls}"></div>`;
    }
    html += `<span class="step-label">${state.step + 1}/${TOTAL_SELECTION_STEPS}</span>`;
    steps.innerHTML = html;
    steps.style.display = 'flex';
  } else {
    steps.style.display = 'none';
  }
  
  const renderers = [
    renderGateType, renderStyle, renderColour, renderHeight, renderWidth,
    renderSlope, renderJobType, renderPropertyType, renderTimeframe,
    renderExtras, renderContact, renderResult
  ];
  renderers[state.step](content);
  
  // Nav
  if (state.step < 11) {
    const canProceed = getCanProceed();
    const hasBack = state.step > 0;
    const label = state.step === 10 ? 'See My Estimate ‚Üí' : state.step === 9 ? 'Continue ‚Üí' : 'Continue ‚Üí';
    nav.innerHTML = `
      <div class="nav-row ${hasBack ? 'has-back' : ''}">
        ${hasBack ? `<button class="btn btn-secondary" onclick="goBack()">‚Üê Back</button>` : ''}
        <button class="btn btn-primary" onclick="goNext()" ${!canProceed ? 'disabled' : ''}>${label}</button>
      </div>
    `;
  } else {
    nav.innerHTML = '';
  }
}

function getCanProceed() {
  switch (state.step) {
    case 0: return !!state.gateType;
    case 1: return !!state.style;
    case 2: return !!state.colour;
    case 3: return !!state.height;
    case 4: return !!state.width;
    case 5: return !!state.slope;
    case 6: return !!state.jobType;
    case 7: return !!state.propertyType;
    case 8: return !!state.timeframe;
    case 9: return true; // extras optional
    case 10: return state.contact.name && state.contact.phone;
    default: return false;
  }
}

// ‚îÄ‚îÄ‚îÄ STEP RENDERERS ‚îÄ‚îÄ‚îÄ

function renderGateType(el) {
  let html = `<div class="section-title">What type of gate?</div>
    <div class="section-subtitle">Select the gate style for your property.</div>`;
  GATE_TYPES.forEach(g => {
    html += `<div class="option ${state.gateType === g.id ? 'selected' : ''}" onclick="select('gateType','${g.id}')">
      <div class="option-check">‚úì</div>
      <div class="option-row">
        <div class="option-icon" style="background: ${g.bg}">${g.icon}</div>
        <div><div class="option-name">${g.name}</div><div class="option-desc">${g.desc}</div>
        <div class="option-price">From $${g.basePrice.toLocaleString()}</div></div>
      </div></div>`;
  });
  el.innerHTML = html;
}

function renderStyle(el) {
  let html = `<div class="section-title">Choose your style</div>
    <div class="section-subtitle">All available in a range of powder coat colours.</div><div class="style-grid">`;
  STYLES.forEach(s => {
    html += `<div class="style-option ${state.style === s.id ? 'selected' : ''}" onclick="select('style','${s.id}')">
      <div class="option-check">‚úì</div>
      <div class="style-preview" style="background: ${s.bg}"></div>
      ${s.popular ? '<div class="style-badge">Popular</div>' : ''}
      <div class="style-name">${s.name}</div>
      <div class="style-extra">${s.priceAdd > 0 ? '+$' + s.priceAdd : 'Base price'}</div></div>`;
  });
  html += '</div>';
  el.innerHTML = html;
}

function renderColour(el) {
  let html = `<div class="section-title">Pick your colour</div>
    <div class="section-subtitle">Standard Colorbond & powder coat colours.</div><div class="colour-grid">`;
  COLOURS.forEach(c => {
    const bg = c.isGradient ? c.hex : c.hex;
    html += `<div class="colour-option ${state.colour === c.id ? 'selected' : ''}" onclick="select('colour','${c.id}')">
      <div class="option-check">‚úì</div>
      <div class="colour-swatch" style="background: ${bg}"></div>
      <div class="colour-name">${c.name}</div>
      <div class="colour-code">${c.code}</div></div>`;
  });
  html += '</div>';
  el.innerHTML = html;
}

function renderHeight(el) {
  let html = `<div class="section-title">What height?</div>
    <div class="section-subtitle">Measured from ground to top of gate.</div>`;
  HEIGHTS.forEach(h => {
    html += `<div class="option ${state.height === h.id ? 'selected' : ''}" onclick="select('height','${h.id}')">
      <div class="option-check">‚úì</div>
      <div class="height-row">
        <div style="display:flex;align-items:center;gap:14px">
          <div class="height-visual">${h.barH.map(b => `<div class="height-bar" style="height:${b}px"></div>`).join('')}</div>
          <div><div class="height-label">${h.label}${h.popular ? ' <span style="color:#e8a838;font-size:11px">‚òÖ Popular</span>' : ''}</div>
          <div class="height-desc">${h.desc}</div></div>
        </div>
      </div></div>`;
  });
  el.innerHTML = html;
}

function renderWidth(el) {
  let html = `<div class="section-title">Opening width?</div>
    <div class="section-subtitle">Measure your driveway or gate opening.</div>`;
  WIDTHS.forEach(w => {
    html += `<div class="option ${state.width === w.id ? 'selected' : ''}" onclick="select('width','${w.id}')">
      <div class="option-check">‚úì</div>
      <div class="width-row"><div class="width-label">${w.label}</div>
      <div class="width-bar" style="width:${w.barWidth};flex-shrink:0"></div></div></div>`;
  });
  el.innerHTML = html;
}

function renderSlope(el) {
  let html = `<div class="section-title">Is your driveway sloped?</div>
    <div class="section-subtitle">Slopes can affect gate type and installation.</div>`;
  SLOPE_OPTIONS.forEach(s => {
    html += `<div class="option ${state.slope === s.id ? 'selected' : ''}" onclick="select('slope','${s.id}')">
      <div class="option-check">‚úì</div>
      <div class="option-row">
        <div class="option-icon" style="background:#f0ebe4;font-size:20px">${s.icon}</div>
        <div><div class="option-name">${s.name}</div><div class="option-desc">${s.desc}</div>
        ${s.priceAdd > 0 ? `<div class="option-price">+$${s.priceAdd}</div>` : ''}</div>
      </div></div>`;
  });
  el.innerHTML = html;
}

function renderJobType(el) {
  let html = `<div class="section-title">New or replacement?</div>
    <div class="section-subtitle">This helps us give you a more accurate estimate.</div><div class="job-grid">`;
  JOB_TYPES.forEach(j => {
    html += `<div class="job-option ${state.jobType === j.id ? 'selected' : ''}" onclick="select('jobType','${j.id}')">
      <div class="option-check">‚úì</div>
      <div class="job-icon">${j.icon}</div>
      <div class="job-name">${j.name}</div>
      <div class="job-desc">${j.desc}</div></div>`;
  });
  html += '</div>';
  el.innerHTML = html;
}

function renderPropertyType(el) {
  let html = `<div class="section-title">Property type?</div>
    <div class="section-subtitle">Helps us plan for access and any approvals needed.</div>`;
  PROPERTY_TYPES.forEach(p => {
    html += `<div class="option ${state.propertyType === p.id ? 'selected' : ''}" onclick="select('propertyType','${p.id}')">
      <div class="option-check">‚úì</div>
      <div class="option-row">
        <div class="option-icon" style="background:#f0ebe4;font-size:22px">${p.icon}</div>
        <div><div class="option-name">${p.name}</div><div class="option-desc">${p.desc}</div></div>
      </div></div>`;
  });
  el.innerHTML = html;
}

function renderTimeframe(el) {
  let html = `<div class="section-title">When do you need it?</div>
    <div class="section-subtitle">No rush ‚Äî just helps Daryl plan his schedule.</div>`;
  TIMEFRAMES.forEach(t => {
    html += `<div class="option ${state.timeframe === t.id ? 'selected' : ''}" onclick="select('timeframe','${t.id}')">
      <div class="option-check">‚úì</div>
      <div class="option-row">
        <div class="option-icon" style="background:#f0ebe4;font-size:22px">${t.icon}</div>
        <div><div class="option-name">${t.name}</div><div class="option-desc">${t.desc}</div></div>
      </div></div>`;
  });
  el.innerHTML = html;
}

function renderExtras(el) {
  let html = `<div class="section-title">Any extras?</div>
    <div class="section-subtitle">Optional add-ons. Skip if you're not sure.</div>`;
  
  // Filter out motor if job type is replace_motor or add_motor
  // Filter out ped gate if selecting pedestrian gate
  const filtered = EXTRAS.filter(e => {
    if ((state.jobType === 'replace_motor' || state.jobType === 'add_motor') && e.id === 'motor') return false;
    if (state.gateType === 'pedestrian' && e.id === 'ped_gate') return false;
    return true;
  });
  
  filtered.forEach(e => {
    const sel = state.extras.includes(e.id);
    html += `<div class="option ${sel ? 'selected' : ''}" onclick="toggleExtra('${e.id}')">
      <div class="option-check">‚úì</div>
      <div class="extra-row"><div class="extra-left">
        <span class="extra-icon">${e.icon}</span><span class="extra-name">${e.name}</span></div>
        <span class="extra-price">+$${e.price}</span></div></div>`;
  });
  el.innerHTML = html;
}

function renderContact(el) {
  el.innerHTML = `
    <div class="section-title">Almost there!</div>
    <div class="section-subtitle">Your details so Daryl can get back to you with an exact quote.</div>
    <div class="form-row">
      <label class="form-label">Your Name <span style="color:#e8a838">*</span></label>
      <input class="form-input" type="text" placeholder="e.g. John Smith" value="${state.contact.name}" oninput="updateContact('name', this.value)">
    </div>
    <div class="form-row">
      <label class="form-label">Phone <span style="color:#e8a838">*</span></label>
      <input class="form-input" type="tel" placeholder="e.g. 0412 345 678" value="${state.contact.phone}" oninput="updateContact('phone', this.value)">
    </div>
    <div class="form-row">
      <label class="form-label">Email</label>
      <input class="form-input" type="email" placeholder="e.g. john@email.com" value="${state.contact.email}" oninput="updateContact('email', this.value)">
    </div>
    <div class="form-row">
      <label class="form-label">Suburb</label>
      <input class="form-input" type="text" placeholder="e.g. Scarborough" value="${state.contact.suburb}" oninput="updateContact('suburb', this.value)">
    </div>
    <div class="form-note">Your info goes directly to Daryl at Gateworld. No spam, no third parties.</div>
  `;
}

function renderResult(el) {
  const gate = GATE_TYPES.find(g => g.id === state.gateType);
  const style = STYLES.find(s => s.id === state.style);
  const colour = COLOURS.find(c => c.id === state.colour);
  const height = HEIGHTS.find(h => h.id === state.height);
  const width = WIDTHS.find(w => w.id === state.width);
  const slope = SLOPE_OPTIONS.find(s => s.id === state.slope);
  const job = JOB_TYPES.find(j => j.id === state.jobType);
  const prop = PROPERTY_TYPES.find(p => p.id === state.propertyType);
  const time = TIMEFRAMES.find(t => t.id === state.timeframe);
  const extrasData = state.extras.map(id => EXTRAS.find(e => e.id === id));
  
  // Price calc
  let total;
  if (job.priceOverride) {
    total = job.priceOverride;
  } else {
    const base = gate.basePrice + style.priceAdd;
    total = Math.round(base * height.multiplier * width.multiplier);
  }
  
  total += slope.priceAdd;
  if (state.colour === 'custom') total += 200;
  if (state.propertyType === 'commercial') total = Math.round(total * 1.2);
  
  const extrasTotal = extrasData.reduce((sum, e) => sum + e.price, 0);
  total += extrasTotal;
  
  const low = Math.round(total * 0.9);
  const high = Math.round(total * 1.15);
  
  const extrasStr = extrasData.length > 0 ? extrasData.map(e => e.name).join(', ') : 'None';
  
  const urgencyBadge = state.timeframe === 'asap' 
    ? '<div style="background:#e8a838;color:#1a1a2e;display:inline-block;padding:3px 10px;border-radius:6px;font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-top:8px">üî• Priority Request</div>' 
    : '';
  
  el.innerHTML = `
    <div class="section-title">Your Estimate${state.contact.name ? ', ' + state.contact.name.split(' ')[0] : ''}</div>
    <div class="section-subtitle">Indicative pricing ‚Äî Daryl will confirm after a site check.</div>
    
    <div class="result-card">
      <div class="result-label">Estimated Range</div>
      <div class="result-price">$${low.toLocaleString()} ‚Äì $${high.toLocaleString()}</div>
      <div class="result-note">Supply, fabrication & installation</div>
      ${urgencyBadge}
    </div>
    
    <div class="summary-card">
      <div class="summary-title">Your Selections</div>
      <div class="summary-row"><span class="summary-key">Gate</span><span class="summary-val">${gate.name}</span></div>
      <div class="summary-row"><span class="summary-key">Style</span><span class="summary-val">${style.name}</span></div>
      <div class="summary-row"><span class="summary-key">Colour</span><span class="summary-val">${colour.name}</span></div>
      <div class="summary-row"><span class="summary-key">Height</span><span class="summary-val">${height.label}</span></div>
      <div class="summary-row"><span class="summary-key">Width</span><span class="summary-val">${width.label}</span></div>
      <div class="summary-row"><span class="summary-key">Slope</span><span class="summary-val">${slope.name}</span></div>
      <div class="summary-row"><span class="summary-key">Job Type</span><span class="summary-val">${job.name}</span></div>
      <div class="summary-row"><span class="summary-key">Property</span><span class="summary-val">${prop.name}</span></div>
      <div class="summary-row"><span class="summary-key">Timeframe</span><span class="summary-val">${time.name}</span></div>
      <div class="summary-row"><span class="summary-key">Extras</span><span class="summary-val">${extrasStr}</span></div>
    </div>
    
    <div class="cta-card">
      <div class="cta-title">Ready for your exact quote?</div>
      <div class="cta-subtitle">Call Daryl now or he'll be in touch based on the details you've provided.</div>
      <div class="cta-buttons">
        <a href="tel:+61435817147" class="btn btn-call">üìû Call Daryl</a>
        <a href="https://gateworld.com.au/quick-quote/" class="btn btn-quote" target="_blank">Request Quote</a>
      </div>
    </div>
    
    <div class="start-over" onclick="reset()">Start over</div>
  `;
}

// ‚îÄ‚îÄ‚îÄ ACTIONS ‚îÄ‚îÄ‚îÄ
function select(key, val) { state[key] = val; render(); }
function toggleExtra(id) {
  state.extras = state.extras.includes(id) ? state.extras.filter(e => e !== id) : [...state.extras, id];
  render();
}
function updateContact(field, val) {
  state.contact[field] = val;
  // Don't re-render the whole thing (would lose focus), just update nav
  const nav = document.getElementById('nav');
  const canProceed = state.contact.name && state.contact.phone;
  const hasBack = state.step > 0;
  nav.innerHTML = `<div class="nav-row has-back">
    <button class="btn btn-secondary" onclick="goBack()">‚Üê Back</button>
    <button class="btn btn-primary" onclick="goNext()" ${!canProceed ? 'disabled' : ''}>See My Estimate ‚Üí</button>
  </div>`;
}

function goNext() {
  const card = document.getElementById('mainCard');
  card.classList.add('animating');
  setTimeout(() => { state.step++; render(); card.classList.remove('animating'); }, 200);
}
function goBack() {
  const card = document.getElementById('mainCard');
  card.classList.add('animating');
  setTimeout(() => { state.step--; render(); card.classList.remove('animating'); }, 200);
}
function reset() {
  state = { step: 0, gateType: null, style: null, colour: null, height: null, width: null, slope: null, jobType: null, propertyType: null, timeframe: null, extras: [], contact: { name: '', phone: '', email: '', suburb: '' } };
  render();
}

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ
render();
</script>
</body>
</html>
